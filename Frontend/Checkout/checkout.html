<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Thanh Toán Vé</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
  <style>
    :root{
      --bg:#f7faff; --card:#fff; --ink:#333; --muted:#95a1b4;
      --brand:#001f3f; --border:#e5eaee; --accent:#ffc107;
      --shadow:0 0 12px rgba(0,0,0,.1); --radius:10px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:Arial, sans-serif; background:var(--bg); color:var(--ink)}
    .container{max-width:760px; margin:24px auto; background:var(--card); padding:24px; border-radius:var(--radius); box-shadow:var(--shadow)}
    h2{margin:18px 0 10px}

    /* Header đơn giản có sẵn userNameLink để JS login/logout hoạt động */
    .header__nav__wp{display:flex; justify-content:center; border-bottom:2px solid var(--border); background:#fff}
    .navbar{display:flex; align-items:center; gap:16px; padding:10px}
    .nav__items-link{font-size:15px; color:var(--muted); text-decoration:none}
    .nav__items-link:hover{color:#7b8390}

    /* Bảng tóm tắt */
    table{width:100%; border-collapse:collapse; margin-top:8px}
    th,td{border:1px solid #ddd; padding:10px; text-align:left}
    tr.total td{font-weight:bold}
    .ticket-info{background:#f0f4ff; padding:15px; border-radius:8px; margin-top:16px}
    .total-amount{font-size:18px; margin-top:10px; font-weight:bold}
    .note{background:#fffbe6; border-left:4px solid var(--accent); padding:14px; margin:18px 0; border-radius:6px}
    .actions{display:flex; justify-content:flex-end; gap:10px; margin-top:10px}
    .btn{padding:10px 18px; border:0; border-radius:8px; font-size:16px; cursor:pointer}
    .btn.secondary{background:#ddd; color:#000}
    .btn.primary{background:var(--brand); color:#fff}
    .btn[disabled]{opacity:.6; cursor:not-allowed}

    /* Form */
    #infoForm{display:flex; flex-wrap:wrap; gap:12px}
    #infoForm .field{flex:1 1 220px; display:flex; flex-direction:column; gap:6px}
    .field label{font-size:14px; color:#555}
    .field input{padding:10px; border:1px solid #ccc; border-radius:6px}
    .err{font-size:12px; color:#c62828; min-height:16px}
  </style>
</head>
<body>

  <!-- Header: có sẵn #userNameLink để JS cập nhật tên/đăng xuất -->
  <div id="header-container">
    <nav class="header__nav__wp">
      <div class="navbar">
        <a class="nav__items-link" href="../">Trang chủ</a>
        <a class="nav__items-link" href="../movies/">Phim</a>
        <a class="nav__items-link" id="userNameLink" href="../login/login.html">Đăng nhập</a>
      </div>
    </nav>
  </div>

  <div class="container" role="main" aria-labelledby="title">
    <h2 id="title">Tóm tắt đơn hàng</h2>

    <table class="order-summary" aria-describedby="orderDesc">
      <caption id="orderDesc" style="text-align:left; padding:6px 0;">
        Kiểm tra chi tiết đơn trước khi thanh toán
      </caption>
      <thead>
        <tr>
          <th>MÔ TẢ</th>
          <th>SỐ LƯỢNG</th>
          <th>THÀNH TIỀN</th>
        </tr>
      </thead>
      <tbody>
        <!-- JS sẽ render các hàng tại đây -->
      </tbody>
      <tfoot>
        <tr class="total">
          <td>Tổng</td>
          <td id="totalQty">0</td>
          <td id="grandTotal">0 đ</td>
        </tr>
      </tfoot>
    </table>

    <h2>Thông tin cá nhân</h2>
    <form id="infoForm">
      <div class="field">
        <label for="fullName">* Họ và tên</label>
        <input id="fullName" name="fullName" type="text" autocomplete="name" required />
      </div>
      <div class="field">
        <label for="phone">* Số điện thoại</label>
        <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="09xxxxxxxx"
               pattern="^(0|\\+84)(\\d){9,10}$" required />
      </div>
      <div class="field">
        <label for="email">Email (tuỳ chọn)</label>
        <input id="email" name="email" type="email" autocomplete="email" />
      </div>
    </form>

    <h2>Hình thức thanh toán</h2>
    <fieldset class="payment-methods">
      <legend class="sr-only" style="position:absolute;left:-9999px">Chọn phương thức thanh toán</legend>
      <label><input type="radio" name="payment" value="qr" checked> Chuyển khoản / Quét mã QR</label>
      <label><input type="radio" name="payment" value="momo"> Ví MoMo</label>
      <label><input type="radio" name="payment" value="card"> Thẻ ATM / Thẻ quốc tế</label>
    </fieldset>

    <div class="ticket-info">
      <!-- ĐỂ Ý: cần một <p> cho script set innerHTML -->
      <p></p>
      <div class="total-amount">TỔNG ĐƠN HÀNG: <strong>0 đ</strong></div>
    </div>

    <div class="note">
      Vé đã mua không thể đổi hoặc hoàn tiền.<br>
      Mã vé sẽ được gửi một lần qua số điện thoại và email (nếu có). Vui lòng kiểm tra thông tin trước khi tiếp tục.
    </div>

    <div class="actions">
      <button class="btn secondary" type="button" id="backBtn" aria-label="Quay lại">←</button>
      <button class="btn primary" id="confirmBtn">Xác nhận</button>
    </div>
  </div>

  <!-- Nếu bạn có loader header riêng, có thể giữ; JS bên dưới đã có fallback nếu không tìm thấy #userNameLink -->
  <!-- <script src="../Homepage/loadheader.js"></script> -->

  <!-- Liên kết tới file JS đã chỉnh sửa -->
  <script src="checkout.js"></script>
</body>
</html>
